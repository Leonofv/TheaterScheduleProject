{"ast":null,"code":"var _jsxFileName = \"/Users/leonofv/Downloads/TheaterScheduleProject-main/schedule-ui/src/components/user/UserPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { Container } from 'semantic-ui-react';\nimport OrderTable from './OrderTable';\nimport { useAuth } from '../context/AuthContext';\nimport { orderApi } from '../misc/ScheduleApi';\nimport { handleLogError } from '../misc/Helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserPage() {\n  _s();\n  const Auth = useAuth();\n  const user = Auth.getUser();\n  const isUser = user.data.rol[0] === 'USER' || 'ADMIN';\n  const [userMe, setUserMe] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [orderDescription, setOrderDescription] = useState('');\n  useEffect(() => {\n    async function fetchData() {\n      setIsLoading(true);\n      try {\n        const response = await orderApi.getUserMe(user);\n        setUserMe(response.data);\n      } catch (error) {\n        handleLogError(error);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    fetchData();\n  }, [user]);\n  const handleInputChange = (e, {\n    name,\n    value\n  }) => {\n    if (name === 'orderDescription') {\n      setOrderDescription(value);\n    }\n  };\n  const handleCreateOrder = async () => {\n    let trimmedDescription = orderDescription.trim();\n    if (!trimmedDescription) {\n      return;\n    }\n    const order = {\n      description: trimmedDescription\n    };\n    try {\n      await orderApi.createOrder(user, order);\n      await fetchUserMeData();\n      setOrderDescription('');\n    } catch (error) {\n      handleLogError(error);\n    }\n  };\n  const fetchUserMeData = async () => {\n    setIsLoading(true);\n    try {\n      const response = await orderApi.getUserMe(user);\n      setUserMe(response.data);\n    } catch (error) {\n      handleLogError(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  if (!isUser) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/about\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(OrderTable, {\n      orders: userMe && userMe.orders,\n      isLoading: isLoading,\n      orderDescription: orderDescription,\n      handleCreateOrder: handleCreateOrder,\n      handleInputChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(UserPage, \"JQpBLyZHj/HPuo4cV6cbut63+cc=\", false, function () {\n  return [useAuth];\n});\n_c = UserPage;\nexport default UserPage;\nvar _c;\n$RefreshReg$(_c, \"UserPage\");","map":{"version":3,"names":["React","useEffect","useState","Navigate","Container","OrderTable","useAuth","orderApi","handleLogError","jsxDEV","_jsxDEV","UserPage","_s","Auth","user","getUser","isUser","data","rol","userMe","setUserMe","isLoading","setIsLoading","orderDescription","setOrderDescription","fetchData","response","getUserMe","error","handleInputChange","e","name","value","handleCreateOrder","trimmedDescription","trim","order","description","createOrder","fetchUserMeData","to","fileName","_jsxFileName","lineNumber","columnNumber","children","orders","_c","$RefreshReg$"],"sources":["/Users/leonofv/Downloads/TheaterScheduleProject-main/schedule-ui/src/components/user/UserPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Navigate } from 'react-router-dom'\nimport { Container } from 'semantic-ui-react'\nimport OrderTable from './OrderTable'\nimport { useAuth } from '../context/AuthContext'\nimport { orderApi } from '../misc/ScheduleApi'\nimport { handleLogError } from '../misc/Helpers'\n\nfunction UserPage() {\n  const Auth = useAuth()\n  const user = Auth.getUser()\n  const isUser = user.data.rol[0] === 'USER' || 'ADMIN'\n\n  const [userMe, setUserMe] = useState(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [orderDescription, setOrderDescription] = useState('')\n\n  useEffect(() => {\n    async function fetchData() {\n      setIsLoading(true)\n\n      try {\n        const response = await orderApi.getUserMe(user)\n        setUserMe(response.data)\n      } catch (error) {\n        handleLogError(error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    fetchData()\n  }, [user])\n\n  const handleInputChange = (e, { name, value }) => {\n    if (name === 'orderDescription') {\n      setOrderDescription(value)\n    }\n  }\n\n  const handleCreateOrder = async () => {\n    let trimmedDescription = orderDescription.trim()\n    if (!trimmedDescription) {\n      return\n    }\n\n    const order = { description: trimmedDescription }\n    try {\n      await orderApi.createOrder(user, order)\n      await fetchUserMeData()\n      setOrderDescription('')\n    } catch (error) {\n      handleLogError(error)\n    }\n  }\n\n  const fetchUserMeData = async () => {\n    setIsLoading(true)\n\n    try {\n      const response = await orderApi.getUserMe(user)\n      setUserMe(response.data)\n    } catch (error) {\n      handleLogError(error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  if (!isUser) {\n    return <Navigate to='/about' />\n  }\n\n  return (\n    <Container>\n      <OrderTable\n        orders={userMe && userMe.orders}\n        isLoading={isLoading}\n        orderDescription={orderDescription}\n        handleCreateOrder={handleCreateOrder}\n        handleInputChange={handleInputChange}\n      />\n    </Container>\n  )\n}\n\nexport default UserPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}