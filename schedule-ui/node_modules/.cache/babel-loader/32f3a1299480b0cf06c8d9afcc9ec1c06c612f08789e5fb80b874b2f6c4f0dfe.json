{"ast":null,"code":"import axios from 'axios';\nimport { config } from '../../Constants';\nimport { parseJwt } from './Helpers';\nexport const scheduleApi = {\n  authenticate,\n  getUsers,\n  createUser,\n  updateUser,\n  toggleUserStatus,\n  deleteUser,\n  getSchedules,\n  deleteSchedule,\n  createSchedule,\n  getUserMe\n};\nfunction authenticate(username, password) {\n  return instance.post('/auth/authenticate', {\n    username,\n    password\n  }, {\n    headers: {\n      'Content-type': 'application/json'\n    }\n  });\n}\nfunction createUser(user) {\n  return instance.post('/auth/create', user, {\n    headers: {\n      'Content-type': 'application/json'\n    }\n  });\n}\nfunction getUsers(user, username) {\n  const url = username ? `/api/users/${username}` : '/api/users';\n  return instance.get(url, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction updateUser(user, username) {\n  return instance.put(`/api/users/${username}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction toggleUserStatus(user, username, isActive) {\n  const url = `/api/users/${username}/${isActive ? 'deactivate' : 'activate'}`;\n  return instance.post(url, {}, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction deleteUser(user, username) {\n  return instance.delete(`/api/users/${username}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction getSchedules(user, text) {\n  const url = text ? `/api/orders?text=${text}` : '/api/shedules';\n  return instance.get(url, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction deleteSchedule(user, scheduleId) {\n  return instance.delete(`/api/schedules/${scheduleId}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction createSchedule(user, schedules) {\n  return instance.post('/api/schedules', schedule, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction getUserMe(user) {\n  return instance.get('/api/users/me', {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\n// -- Axios\n\nconst instance = axios.create({\n  baseURL: config.url.API_BASE_URL\n});\ninstance.interceptors.request.use(function (config) {\n  if (config.headers.Authorization) {\n    const token = config.headers.Authorization.split(' ')[1];\n    const data = parseJwt(token);\n    if (Date.now() > data.exp * 1000) {\n      window.location.href = \"/login\";\n    }\n  }\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\nfunction bearerAuth(user) {\n  return `Bearer ${user.accessToken}`;\n}","map":{"version":3,"names":["axios","config","parseJwt","scheduleApi","authenticate","getUsers","createUser","updateUser","toggleUserStatus","deleteUser","getSchedules","deleteSchedule","createSchedule","getUserMe","username","password","instance","post","headers","user","url","get","bearerAuth","put","isActive","delete","text","scheduleId","schedules","schedule","create","baseURL","API_BASE_URL","interceptors","request","use","Authorization","token","split","data","Date","now","exp","window","location","href","error","Promise","reject","accessToken"],"sources":["/Users/leonofv/Documents/GitHub/TheaterScheduleProject-main/schedule-ui/src/components/misc/ScheduleApi.js"],"sourcesContent":["import axios from 'axios'\nimport { config } from '../../Constants'\nimport { parseJwt } from './Helpers'\n\nexport const scheduleApi = {\n  authenticate,\n  getUsers,\n  createUser, \n  updateUser,\n  toggleUserStatus,\n  deleteUser,\n  getSchedules,\n  deleteSchedule,\n  createSchedule,\n  getUserMe,\n}\n\nfunction authenticate(username, password) {\n  return instance.post('/auth/authenticate', { username, password }, {\n    headers: { 'Content-type': 'application/json' }\n  })\n}\n\nfunction createUser(user) {\n  return instance.post('/auth/create', user, {\n    headers: {\n      'Content-type': 'application/json',\n    }\n  })\n}\n\nfunction getUsers(user, username) {\n  const url = username ? `/api/users/${username}` : '/api/users'\n  return instance.get(url, {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\nfunction updateUser(user, username) {\n  return instance.put(`/api/users/${username}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\nfunction toggleUserStatus(user, username, isActive) {\n  const url = `/api/users/${username}/${isActive ? 'deactivate' : 'activate'}`\n  return instance.post(url, {}, {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\nfunction deleteUser(user, username) {\n  return instance.delete(`/api/users/${username}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\nfunction getSchedules(user, text) {\n  const url = text ? `/api/orders?text=${text}` : '/api/shedules'\n  return instance.get(url, {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\nfunction deleteSchedule(user, scheduleId) {\n  return instance.delete(`/api/schedules/${scheduleId}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\nfunction createSchedule(user, schedules) {\n  return instance.post('/api/schedules', schedule, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  })\n}\n\nfunction getUserMe(user) {\n  return instance.get('/api/users/me', {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\n// -- Axios\n\nconst instance = axios.create({\n  baseURL: config.url.API_BASE_URL\n})\n\ninstance.interceptors.request.use(function (config) {\n  if (config.headers.Authorization) {\n    const token = config.headers.Authorization.split(' ')[1]\n    const data = parseJwt(token)\n    if (Date.now() > data.exp * 1000) {\n      window.location.href = \"/login\"\n    }\n  }\n  return config\n}, function (error) {\n  return Promise.reject(error)\n})\n\nfunction bearerAuth(user) {\n  return `Bearer ${user.accessToken}`\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}